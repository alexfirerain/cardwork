 # Сервис перевода денег **CardWork**
 
 
**"CardWork"** ‒ это REST-сервис для осуществления и журналирования денежных переводов в согласованной работе с клиентским веб-приложением в соответствии со спецификацией "[Money Transfer Service Specification](https://github.com/netology-code/jd-homeworks/blob/master/diploma/MoneyTransferServiceSpecification.yaml)". Работа программного комплекса денежных переводов состоит во взаимодействии двух независимых приложений: передовое (клиентское) веб-приложение (["Card Transfer"](https://github.com/serp-ya/card-transfer)) и тыловое (серверное) приложение-сервис (**данный проект**).

 ### Запуск программного комплекса
Как клиентская, так и серверная часть могут быть запущены несколькими способами: на локальной машине как самостоятельные скомпилированные приложения либо как докер-контейнеры, а клиентское веб-приложение также может быть запущено удалённо (в частности оно доступно по адресу https://serp-ya.github.io/card-transfer/). Для запуска программного комплекса как двух приложений ОС должна поддерживать Java и NodeJS, для запуска через докер-контейнеры ‒ поддерживать Docker.

Рекомендуемый способ запуска ‒ через "Докер-Компоуз" командой `docker-compose up` в корневой папке **проекта**, которая запускает на локальной машине докер-контейнеры с передовой и тыловой частями, обеспечивая согласованность их настроек. Предполагается, что проект "Card-Transfer" также присутствует на машине по адресу, отражённому в `docker-compose.yml`, и имеет адекватный `Dockerfile`. **"CardWork"** запускается на порту 5500, "Card-Transfer" запускается на порту 3000.

При необходимости модификации параметров запуска программного комплекса необходимые изменения могут быть сделаны в конфигурационных файлах приложений (либо созданы дополнительные профили настроек). Настройки **данного проекта** содержатся в `application.yml`:

* `server: port` ‒ порт, на котором **"CardWork"** ожидает запросов;
* `logging: file: name` ‒ адрес журнала переводов (относительно корня проекта);
* `application: commission` ‒ размер взымаемой при переводах комиссии (как число двойной точности, где 0,01 означает 1%);
* `application: front-url` ‒ адрес, по которому запущено передовое веб-приложение, локальный (например `"http://localhost:3000"`) или удалённый (например `"https://serp-ya.github.io"`).

## Принцип работы и архитектура проекта

**Приложение-сервис** принимает от передового приложения запросы на перевод денежных средств и запросы на подтверждение запрошенного перевода в формате json согласно спецификации "[Money Transfer Service Specification](https://github.com/netology-code/jd-homeworks/blob/master/diploma/MoneyTransferServiceSpecification.yaml)". В ответ на эти запросы приложение, согласно спецификации, отсылает в формате json присвоенный номер операции с HTTP-кодом 200 в случае успеха операции либо описание проблемы с кодом 400 или 500 в случае неуспеха. 

#### Модель предметной области

Приложение работает с запросами на перевод, содержащими необходимые данные: номер, срок действия и CVV карты отправителя, номер карты получателя и предмет перевода, оформленный как вложенный объект, состоящий из идентификатора валюты перевода и суммы перевода в центовых единицах (т.е. копейках). Минимальная величина суммы перевода равна 100 копейкам (ограничение задаётся архитектурой веб-приложения), максимальная в копейках ограничена ёмкостью типа `int`. В модели **"CardWork"** этому запросу соответствует класс [**Перевод**](src/main/java/ru/netology/cardwork/model/Transfer.java) (с вложенным классом **СуммаПеревода**). Объекты этого класса также используются в приложении для работы с переводами как сущностями. 

Сведения о карте отправителя (номер, срок дейтвия и CVV) представлены внутри класса Перевод в виде класса [**Карта**](src/main/java/ru/netology/cardwork/model/Card.java). Сведения о сроке валидности карты хранятся в виде объекта java-класса `Date` и могут быть запрошены как в формате `Date`, так и в формате строки вида `ММ/ГГ`, соответствующей представлению в классе **Перевод** и означающей последний месяц, когда карта годна. 

Информация о соответствии карт денежным средствам на счетах реализованы через эмуляцию банковской структуры в виде репозитория, хранящего объекты типа [**Аккаунт**](src/main/java/ru/netology/cardwork/model/Account.java). Объект типа **Аккаунт** содержит соответствующий ему объект типа **Карта**, прилежащие ему контактные данные и один или несколько валютных счетов, средства на которых представлены аналогично представлению в классе **Перевод**, а также флаг, сигнализирующий активность аккаунта.

#### Сервис переводов



#### Эмуляция банковских операций


